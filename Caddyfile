:3000 {
  # Serve static files from /srv (dist directory)
  root * /srv

  # Enable gzip compression
  encode gzip

  # Cache static assets
  @static {
    path /assets/*
    path /favicon.ico
    path *.png *.jpg *.jpeg *.gif *.svg *.webp
    path *.js *.css
  }
  header @static Cache-Control "public, max-age=31536000, immutable"

  # SPA fallback - route all requests to index.html
  try_files {path} /index.html

  # Serve files
  file_server

  # Log
  log {
    output stdout
    format json
  }
}
